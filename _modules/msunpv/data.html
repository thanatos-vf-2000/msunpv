

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>msunpv.data &mdash; msunpv 0.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=938c9ccc"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            msunpv
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../msunpv.html">msunpv package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">src</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ard-tek.com/">MSunPV MD Router Solar</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">msunpv</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">msunpv.data</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for msunpv.data</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Data for the MSunPV library.&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">xmltodict</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">TypedDict</span>

<span class="n">_LOG</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_hex2int</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hex string to signed integer.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="s2">&quot;00&quot;</span> <span class="o">+</span> <span class="n">val</span>
    <span class="n">uintval</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">uintval</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">**</span> <span class="p">(</span><span class="n">bits</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">uintval</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">0</span> <span class="o">-</span> <span class="p">((</span><span class="mi">2</span><span class="o">**</span><span class="n">bits</span><span class="p">)</span> <span class="o">-</span> <span class="n">uintval</span><span class="p">))</span>
    <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;_hex2int - Hex string: to signed integer: </span><span class="si">%s</span><span class="s2"> =&gt; </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">uintval</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">uintval</span>

<div class="viewcode-block" id="GenericType">
<a class="viewcode-back" href="../../msunpv.html#msunpv.GenericType">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">GenericType</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic Type for Sensor and Counter&quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>       <span class="c1">#: Name</span>
    <span class="n">dotpos</span><span class="p">:</span> <span class="nb">int</span>     <span class="c1">#: N/A</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">int</span>       <span class="c1">#: Type of Sensor Or Counter (MsunPV internal type)</span>
    <span class="n">suffix</span><span class="p">:</span> <span class="nb">str</span>     <span class="c1">#: suffix or unit</span></div>


<div class="viewcode-block" id="SensorType">
<a class="viewcode-back" href="../../msunpv.html#msunpv.SensorType">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SensorType</span><span class="p">(</span><span class="n">GenericType</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Same structure as GenericType&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="CounterType">
<a class="viewcode-back" href="../../msunpv.html#msunpv.CounterType">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CounterType</span><span class="p">(</span><span class="n">GenericType</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Same structure as GenericType&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="Command">
<a class="viewcode-back" href="../../msunpv.html#msunpv.Command">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Command</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
    <span class="n">cmdtype</span><span class="p">:</span> <span class="nb">int</span>        <span class="c1">#: Command Type</span>
    <span class="n">cmdvalue</span><span class="p">:</span> <span class="nb">int</span>       <span class="c1">#: Command Value</span>
    <span class="n">cmdtxt</span><span class="p">:</span> <span class="nb">str</span>         <span class="c1">#: Command Text label</span>
    <span class="n">param1</span><span class="p">:</span> <span class="nb">str</span>         <span class="c1">#: Command parameter 1</span>
    <span class="n">param2</span><span class="p">:</span> <span class="nb">str</span>         <span class="c1">#: Command parameter 2</span>
    <span class="n">param3</span><span class="p">:</span> <span class="nb">str</span>         <span class="c1">#: Command parameter 3</span>
    <span class="n">param4</span><span class="p">:</span> <span class="nb">str</span>         <span class="c1">#: Command parameter 4</span></div>


<div class="viewcode-block" id="MSunPVCommon">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVCommon">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MSunPVCommon</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generic Class function used in MSunPVDataStatus and MSunPVDataIndex&quot;&quot;&quot;</span>

<div class="viewcode-block" id="MSunPVCommon.get">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVCommon.get">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of an attribute if it exists, otherwise None.</span>

<span class="sd">        Args:</span>
<span class="sd">            attribute (str): name of attribute (in lower case)</span>

<span class="sd">        Raises:</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: None or value of attribute</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - get attribute </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">attribute</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return all attributes of the object in str.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>

<span class="sd">        Raises:</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - return all attribute.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">attrs</span><span class="si">}</span><span class="s2">)&quot;</span></div>


<div class="viewcode-block" id="MSunPVDataStatus">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVDataStatus">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MSunPVDataStatus</span><span class="p">(</span><span class="n">MSunPVCommon</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to store MSunPV Status data to JSON.&quot;&quot;&quot;</span>

    <span class="c1"># rtcc - Clock</span>
    <span class="n">clock</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1">#: Time and Day (on two characters in French) ``16:03:53 ME``</span>

    <span class="c1"># rssi - Wifi Received Signal Strength Indication</span>
    <span class="n">rssi_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>     <span class="c1">#: Wifi Received Signal Strength Indication value in % [0 to 100] ``40``</span>
    <span class="n">rssi_quality</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1">#: Wifi Received Signal Strength Indication in dbm [-100 dBm (weak signal) to 0 dBm (strong signal)] ``-80``</span>

    <span class="c1">#paramSys - System information</span>
    <span class="n">time</span><span class="p">:</span> <span class="nb">str</span>               <span class="c1">#: Time ``16:03:53``</span>
    <span class="n">date</span><span class="p">:</span> <span class="nb">str</span>               <span class="c1">#: Date ``05/06/2025``</span>
    <span class="n">sd_save</span><span class="p">:</span> <span class="nb">str</span>            <span class="c1">#: SD recording On/Off ``On``</span>
    <span class="n">sd_delay</span><span class="p">:</span> <span class="nb">str</span>           <span class="c1">#: Recording interval on SD - minutes and seconds ``01:00``</span>
    <span class="n">modele</span><span class="p">:</span> <span class="nb">str</span>             <span class="c1">#: Router model MS_PV2_2d or MS_PV4_4d ``MS_PV2_2d``</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span>            <span class="c1">#: Project version ``5.0.1``</span>
    <span class="n">serial_number</span><span class="p">:</span> <span class="nb">str</span>      <span class="c1">#: Serial number ``0000224``</span>
    <span class="n">firmware_wifi</span><span class="p">:</span> <span class="nb">str</span>      <span class="c1">#: Firmware Wifi ``105b``</span>
    <span class="n">firmware_router</span><span class="p">:</span> <span class="nb">str</span>    <span class="c1">#: Firmware Router ``105b``</span>

    <span class="c1">#inAns - Values of the 16 sensors</span>
    <span class="n">power_reso</span><span class="p">:</span> <span class="nb">float</span>           <span class="c1">#: Power reso (EDF/ENEDIS/Other) in W ``-49,6`` injection or ``49,6`` consumers</span>
    <span class="n">power_pv_read</span><span class="p">:</span> <span class="nb">float</span>        <span class="c1">#: power solar panel in W ``-0,6``</span>
    <span class="n">power_pv_positive</span><span class="p">:</span> <span class="nb">float</span>    <span class="c1">#: power solar panel in W - positive ``0,6``</span>
    <span class="n">power_home</span><span class="p">:</span> <span class="nb">float</span>           <span class="c1">#: Power home consumption in W ``49``</span>
    <span class="n">power_pv_inject</span><span class="p">:</span> <span class="nb">float</span>      <span class="c1">#: power solar panel injected in W ``49``</span>
    <span class="n">power_pv_consumed</span><span class="p">:</span> <span class="nb">float</span>    <span class="c1">#: power solar panel consumed in W ``49``</span>

    <span class="c1">#: Output Balloon</span>
    <span class="c1">#:</span>
    <span class="c1">#: * **MSPV_2_2d** – (0–400) → (0–100%) %, value ``5``</span>
    <span class="c1">#: * **MSPV_4_4d** – Power en W, value ``20``</span>
    <span class="n">out_balloon</span><span class="p">:</span> <span class="nb">float</span>
    <span class="c1">#: Output Radiator</span>
    <span class="c1">#:</span>
    <span class="c1">#: * **MSPV_2_2d** – (0–400) → (0–100%) %, value ``10``</span>
    <span class="c1">#: * **MSPV_4_4d** – Power en W, value ``200``</span>
    <span class="n">out_radiator</span><span class="p">:</span> <span class="nb">float</span>

    <span class="n">temperature_balloon</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1">#: Temperature Balloon in °C ``47``</span>
    <span class="n">temperature_radiator</span><span class="p">:</span> <span class="nb">float</span> <span class="c1">#: Temperature radiator in °C ``19``</span>
    <span class="n">temperature_room</span><span class="p">:</span> <span class="nb">float</span>     <span class="c1">#: Temperature room in °C ``21``</span>

    <span class="n">sensor_8</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>         <span class="c1">#: Sensor 9 ``0``</span>
    <span class="n">sensor_9</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>         <span class="c1">#: Sensor 10 ``0``</span>
    <span class="n">sensor_10</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>        <span class="c1">#: Sensor 11 ``0``</span>
    <span class="n">sensor_11</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>        <span class="c1">#: Sensor 12 ``0``</span>
    <span class="n">sensor_12</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>        <span class="c1">#: Sensor 13 ``0``</span>
    <span class="n">sensor_13</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>        <span class="c1">#: Sensor 14 ``0``</span>
    <span class="n">sensor_14</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>        <span class="c1">#: Sensor 15 ``0``</span>
    <span class="n">sensor_15</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>        <span class="c1">#: Sensor 16 ``0``</span>

    <span class="c1">#: Sensor monitoring ``0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;``</span>
    <span class="c1">#:</span>
    <span class="c1">#: * **0** - no overflow</span>
    <span class="c1">#: * **1** - maximum </span>
    <span class="c1">#: * **2** - minimum overflow, or sensor disconnected.</span>
    <span class="n">survmm</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    
    <span class="n">cmdpos</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>   <span class="c1">#: Position of the 8 commands ``2;0;0;0;0;0;0;2;``</span>

    <span class="n">cmd_balloon_manuel</span><span class="p">:</span> <span class="nb">bool</span>            <span class="c1">#: Command balloon manuel True/False ``False``</span>
    <span class="n">cmd_balloon_auto</span><span class="p">:</span> <span class="nb">bool</span>              <span class="c1">#: Command balloon auto True/False ``True``</span>
    <span class="n">cmd_radiator_manuel</span><span class="p">:</span> <span class="nb">bool</span>           <span class="c1">#: Command radiator manuel True/False ``False``</span>
    <span class="n">cmd_radiator_auto</span><span class="p">:</span> <span class="nb">bool</span>             <span class="c1">#: Command radiator auto True/False ``True``</span>
    <span class="n">state_test_router_inject</span><span class="p">:</span> <span class="nb">bool</span>      <span class="c1">#: State test router injection True/False ``False``</span>
    <span class="n">state_test_router_zero</span><span class="p">:</span> <span class="nb">bool</span>        <span class="c1">#: State test router zero True/False ``False``</span>
    <span class="n">state_test_router_medium</span><span class="p">:</span> <span class="nb">bool</span>      <span class="c1">#: State test router medium True/False ``False``</span>
    <span class="n">state_test_router_hight</span><span class="p">:</span> <span class="nb">bool</span>       <span class="c1">#: State test router hight True/False ``False``</span>
    

    <span class="n">outstat</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>  <span class="c1">#: Values of the 16 outputs (0–100%) in % ``17;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;``</span>


    <span class="n">cptvals</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1">#: Values of the 8 counters in hexadecimal ``9a02;ffffa128;ffffff69;ffffa560;0;0;0;0;``</span>

    <span class="n">daily_consumption</span><span class="p">:</span> <span class="nb">float</span>                <span class="c1">#: Daily consumption in kWh ``2``</span>
    <span class="n">daily_injection</span><span class="p">:</span> <span class="nb">float</span>                  <span class="c1">#: Daily injectionin kWh ``1``</span>
    <span class="n">daily_production</span><span class="p">:</span> <span class="nb">float</span>                 <span class="c1">#: Daily production in kWh  ``2``</span>
    <span class="n">cumulative_production</span><span class="p">:</span> <span class="nb">float</span>            <span class="c1">#: Cumulative production in kWh  ``258``</span>
    <span class="n">production_daily_consumption</span><span class="p">:</span> <span class="nb">float</span>     <span class="c1">#: Solar production consumed (PV - injection) in kWh  ``1``</span>
    <span class="n">total_consumption</span><span class="p">:</span> <span class="nb">float</span>                <span class="c1">#: Total consumption (grid + PV - injection) in kWh  ``7``</span>

    <span class="n">daily_balloon_consumption</span><span class="p">:</span> <span class="nb">float</span>        <span class="c1">#: Daily water heater consumption (Msunpv 4x4) in kWh ``1``</span>
    <span class="n">daily_radiator_consumption</span><span class="p">:</span> <span class="nb">float</span>       <span class="c1">#: Daily radiator consumption (Msunpv 4x4) in kWh ``1``</span>

    <span class="n">choutval</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>     <span class="c1">#: Values calculated at the output of the heating modules ``0;0;0;ff;:0,0;0,0;0,0;0,0;``</span>
    
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">data_xml</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Init MSunPVDataStatus.</span>

<span class="sd">        Args:</span>
<span class="sd">            data_xml (str): data retry</span>

<span class="sd">        Raises:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">data</span> <span class="o">=</span> <span class="n">xmltodict</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data_xml</span><span class="p">)</span>

        <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Data keys= &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>  <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

        <span class="c1"># rtcc - Clock</span>
        <span class="c1"># &lt;rtcc&gt;16:03:53 ME&lt;/rtcc&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;rtcc&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clock</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;rtcc&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - rtcc not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clock</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        
        <span class="c1">#rssi - Wifi Received Signal Strength Indication</span>
        <span class="c1">#&lt;rssi&gt;40;-80&lt;/rssi&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;rssi&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="n">rssi</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;rssi&quot;</span><span class="p">]</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">rssi</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rssi_value</span>     <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rssi_quality</span>   <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">rssi</span><span class="p">,</span> <span class="n">vals</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - rssi not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rssi_value</span>     <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rssi_quality</span>   <span class="o">=</span> <span class="mi">0</span>

        <span class="c1">#paramSys -  System information</span>
        <span class="c1">#&lt;paramSys&gt;16:03:53;05/06/2025;On;01:00;0,0;MS_PV2_2d;5.0.1;0000224;105b;105b;00:00;00:00&lt;/paramSys&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;paramSys&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="n">paramsys</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;paramSys&quot;</span><span class="p">]</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">paramsys</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">time</span>               <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span>               <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_save</span>            <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_delay</span>           <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modele</span>             <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span>            <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">serial_number</span>      <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_wifi</span>      <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_router</span>    <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">vals</span><span class="p">,</span> <span class="n">paramsys</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - paramSys not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">time</span>           <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span>               <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_save</span>            <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_delay</span>           <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modele</span>             <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span>            <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">serial_number</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_wifi</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_router</span>    <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="c1">#inAns - Values of the 16 sensors</span>
        <span class="c1">#&lt;inAns&gt;-49,6;-0,6;69; 0;221,5;40,0;0,0;0,0; 0; 0; 0; 0; 0; 0; 0; 0;&lt;/inAns&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;inAns&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="n">inans</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;inAns&quot;</span><span class="p">]</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">inans</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_reso</span>         <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_read</span>      <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_positive</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># inverse to get it in positive</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Sensor for </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">modele</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modele</span> <span class="o">==</span> <span class="s2">&quot;MSPV_2_2d&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">out_balloon</span>    <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1"># (0-400) -&gt; (0-100%)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">out_radiator</span>   <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1"># (0-400) -&gt; (0-100%)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">modele</span> <span class="o">==</span> <span class="s2">&quot;MSPV_4_4d&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">out_balloon</span>    <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>  <span class="c1"># Puissance en W</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">out_radiator</span>   <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>  <span class="c1"># Puissance en W</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">out_balloon</span>    <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">out_radiator</span>   <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">temperature_balloon</span>    <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">temperature_radiator</span>   <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">temperature_room</span>       <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">8</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_8</span>   <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_9</span>   <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_10</span>  <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_11</span>  <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">11</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_12</span>  <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_13</span>  <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">13</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_14</span>  <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">14</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_15</span>  <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">15</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_8</span>   <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_9</span>   <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_10</span>  <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_11</span>  <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_12</span>  <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_13</span>  <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_14</span>  <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sensor_15</span>  <span class="o">=</span> <span class="mi">0</span>
            <span class="k">del</span> <span class="n">inans</span><span class="p">,</span> <span class="n">vals</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - inAns not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_reso</span>             <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_read</span>          <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_positive</span>      <span class="o">=</span> <span class="mi">0</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">out_balloon</span>            <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">out_radiator</span>           <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">temperature_balloon</span>    <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">temperature_radiator</span>   <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">temperature_room</span>       <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_8</span>   <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_9</span>   <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_10</span>  <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_11</span>  <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_12</span>  <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_13</span>  <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_14</span>  <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sensor_15</span>  <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power_home</span>         <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_read</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_reso</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_inject</span>    <span class="o">=</span> <span class="p">(</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">power_reso</span> <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power_pv_positive</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_reso</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_consumed</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_positive</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">power_pv_inject</span>

        <span class="c1">#survMm - Sensor monitoring</span>
        <span class="c1">#&lt;survMm&gt;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;&lt;/survMm&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;survMm&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">survmm</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;survMm&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">survmm</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">survmm</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">16</span><span class="p">)[:</span><span class="mi">16</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">_LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Invalid values in survMm — use of default values.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">survmm</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">16</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - survMm not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">survmm</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">16</span>

        <span class="c1">#cmdPos - Position of the 8 commands</span>
        <span class="c1">#&lt;cmdPos&gt;2;0;0;0;0;0;0;2;&lt;/cmdPos&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;cmdPos&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;cmdPos&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">_LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Invalid values in cmdPos — use of default values.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_balloon_manuel</span>     <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_balloon_auto</span>       <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x02</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_radiator_manuel</span>    <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x04</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_radiator_auto</span>      <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x08</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_inject</span>   <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_zero</span>     <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x02</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_medium</span>   <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x04</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_hight</span>    <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mh">0x08</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - cmdpos not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmdpos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_balloon_manuel</span>     <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_balloon_auto</span>       <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_radiator_manuel</span>    <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmd_radiator_auto</span>      <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_inject</span>   <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_zero</span>     <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_medium</span>   <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_test_router_hight</span>    <span class="o">=</span> <span class="mi">0</span>

        <span class="c1">#outStat - Values of the 16 outputs from 0 to 100%.</span>
        <span class="c1">#&lt;outStat&gt;17;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;&lt;/outStat&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;outStat&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outstat</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;outStat&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outstat</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outstat</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">16</span><span class="p">)[:</span><span class="mi">16</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">_LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Invalid values in outStat — use of default values.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outstat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">16</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - outStat not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outstat</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">16</span>

        <span class="c1">#cptVals - Values of the 8 counters in hexadecimal.</span>
        <span class="c1">#&lt;cptVals&gt;9a02;ffffa128;ffffff69;ffffa560;0;0;0;0;&lt;/cptVals&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;cptVals&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;cptVals&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">_LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Invalid values in cptVals — use of default values.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_consumption</span>          <span class="o">=</span> <span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">_hex2int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">/</span> <span class="mf">10000.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_injection</span>            <span class="o">=</span> <span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">_hex2int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="o">/</span> <span class="o">-</span><span class="mf">10000.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_production</span>           <span class="o">=</span> <span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">_hex2int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span> <span class="o">/</span> <span class="o">-</span><span class="mf">10000.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cumulative_production</span>      <span class="o">=</span> <span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">_hex2int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span> <span class="o">/</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modele</span> <span class="o">==</span> <span class="s2">&quot;MSPV_4_4d&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">daily_balloon_consumption</span>  <span class="o">=</span> <span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">_hex2int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span> <span class="o">/</span> <span class="mf">10000.0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">daily_radiator_consumption</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">float</span><span class="p">(</span><span class="n">_hex2int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span> <span class="o">/</span> <span class="mf">10000.0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">daily_balloon_consumption</span>  <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">daily_radiator_consumption</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - cptVals not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_consumption</span>                      <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_injection</span>                        <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_production</span>                       <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cumulative_production</span>                  <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_balloon_consumption</span>              <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">daily_radiator_consumption</span>             <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">production_daily_consumption</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">daily_production</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">daily_injection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_consumption</span>              <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">daily_consumption</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">production_daily_consumption</span>
        
        <span class="c1">#chOutVal - Values calculated at the output of the heating modules.</span>
        <span class="c1">#&lt;chOutVal&gt;0;0;0;ff;:0,0;0,0;0,0;0,0;&lt;/chOutVal&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;chOutVal&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">choutvalchoutval</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;chOutVal&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">_LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - Invalid values in chOutVal — use of default values.&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - chOutVal not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cptvals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span>       </div>


<div class="viewcode-block" id="MSunPVDataIndex">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVDataIndex">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MSunPVDataIndex</span><span class="p">(</span><span class="n">MSunPVCommon</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to store MSunPV Index data to JSON.&quot;&quot;&quot;</span>

    <span class="c1">#paramSys - System information</span>
    <span class="n">time</span><span class="p">:</span> <span class="nb">str</span>               <span class="c1">#: Time ``16:03:53``</span>
    <span class="n">date</span><span class="p">:</span> <span class="nb">str</span>               <span class="c1">#: Date ``05/06/2025``</span>
    <span class="n">sd_save</span><span class="p">:</span> <span class="nb">str</span>            <span class="c1">#: SD recording On/Off ``On``</span>
    <span class="n">sd_delay</span><span class="p">:</span> <span class="nb">str</span>           <span class="c1">#: Recording interval on SD - minutes and seconds ``01:00``</span>
    <span class="n">modele</span><span class="p">:</span> <span class="nb">str</span>             <span class="c1">#: Router model MS_PV2_2d or MS_PV4_4d ``MS_PV2_2d``</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span>            <span class="c1">#: Project version ``5.0.1``</span>
    <span class="n">serial_number</span><span class="p">:</span> <span class="nb">str</span>      <span class="c1">#: Serial number ``0000224``</span>
    <span class="n">firmware_wifi</span><span class="p">:</span> <span class="nb">str</span>      <span class="c1">#: Firmware Wifi ``105b``</span>
    <span class="n">firmware_router</span><span class="p">:</span> <span class="nb">str</span>    <span class="c1">#: Firmware Router ``105b``</span>

    <span class="n">typans</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>       <span class="c1">#: Type sensors ``PowRéso;1;6:PowP.V;1;6:OutBal;0;3:OutRad;0;3:VoltRés;1;4:T_Bal1;1;18:T_SDB;1;18:T_Amb;1;18:S9;0;0:S10;0;0:S11;0;0:S12;0;0:S13;0;0:S14;0;0:S15;0;0:S16;0;0:``</span>

    <span class="n">typouts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>      <span class="c1">#: Type Output ``R_Bal1;0;2:Rad_SDB;0;2:A3;0;0:A4;0;0:A5;0;0:A6;0;0:A7;0;0:A8;0;0:A9;0;0:A10;0;0:A11;0;0:A12;0;0:A13;0;0:A14;0;0:A15;0;0:A16;0;0:``</span>

    <span class="n">cmdm</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>         <span class="c1">#: Command</span>

    <span class="n">typcpt</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>       <span class="c1">#: Type compteur</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">data_xml</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Init MSunPVDataIndex.</span>

<span class="sd">        Args:</span>
<span class="sd">            data_xml (str): data retry</span>

<span class="sd">        Raises:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">data</span> <span class="o">=</span> <span class="n">xmltodict</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data_xml</span><span class="p">)</span>

        <span class="c1">#paramSys -  System information</span>
        <span class="c1">#&lt;paramSys&gt;16:15:40;05/06/2025;On;01:00;0,0;MS_PV2_2d;5.0.1;0000224;105b;105b;00:00;00:00&lt;/paramSys&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;paramSys&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="n">paramsys</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;paramSys&quot;</span><span class="p">]</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">paramsys</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">time</span>               <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span>               <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_save</span>            <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_delay</span>           <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modele</span>             <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span>            <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">serial_number</span>      <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_wifi</span>      <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_router</span>    <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">vals</span><span class="p">,</span> <span class="n">paramsys</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - paramSys not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">time</span>               <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span>               <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_save</span>            <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sd_delay</span>           <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modele</span>             <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span>            <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">serial_number</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_wifi</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">firmware_router</span>    <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="c1">#typAns - Type sensors</span>
        <span class="c1">#&lt;typAns&gt;PowRéso;1;6:PowP.V;1;6:OutBal;0;3:OutRad;0;3:VoltRés;1;4:T_Bal1;1;18:T_SDB;1;18:T_Amb;1;18:S9;0;0:S10;0;0:S11;0;0:S12;0;0:S13;0;0:S14;0;0:S15;0;0:S16;0;0:&lt;/typAns&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;typAns&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">typans</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;typAns&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - typAns not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        
        <span class="c1">#typouts - Type Output</span>
        <span class="c1">#&lt;typouts&gt;R_Bal1;0;2:Rad_SDB;0;2:A3;0;0:A4;0;0:A5;0;0:A6;0;0:A7;0;0:A8;0;0:A9;0;0:A10;0;0:A11;0;0:A12;0;0:A13;0;0:A14;0;0:A15;0;0:A16;0;0:&lt;/typouts&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;typouts&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">typouts</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;typouts&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - typouts not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

        <span class="c1">#cmdM - Command</span>
        <span class="c1">#&lt;cmdM0&gt;3;2;Comd Manu/Auto;ManuBal;AutoBal;ManuRad;AutoRad;&lt;/cmdM0&gt;</span>
        <span class="c1">#&lt;cmdM1&gt;0;0;Commande 2;Param1;Param2;Param3;Param4;&lt;/cmdM1&gt;</span>
        <span class="c1">#&lt;cmdM2&gt;0;0;Commande 3;Param1;Param2;Param3;Param4;&lt;/cmdM2&gt;</span>
        <span class="c1">#&lt;cmdM3&gt;0;0;Commande 4;Param1;Param2;Param3;Param4;&lt;/cmdM3&gt;</span>
        <span class="c1">#&lt;cmdM4&gt;0;0;Commande 5;Param1;Param2;Param3;Param4;&lt;/cmdM4&gt;</span>
        <span class="c1">#&lt;cmdM5&gt;0;0;Commande 6;Param1;Param2;Param3;Param4;&lt;/cmdM5&gt;</span>
        <span class="c1">#&lt;cmdM6&gt;0;0;Commande 7;Param1;Param2;Param3;Param4;&lt;/cmdM6&gt;</span>
        <span class="c1">#&lt;cmdM7&gt;1;2;Test routeur;Inject;Zéro;Moyen;Fort;&lt;/cmdM7&gt;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cmdm</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">8</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;cmdM</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cmdm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - </span><span class="si">%s</span><span class="s2"> not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

        

        <span class="c1">#typCpt - Type compteur</span>
        <span class="c1">#&lt;typCpt&gt;EnConso;1;16:EnInj;1;16:EnPV_J;1;16:EnPV_P;1;17:Compt 5;0;0:Compt 6;0;0:Compt 7;0;0:Compt 8;0;0:&lt;/typCpt&gt;</span>
        <span class="k">if</span> <span class="s2">&quot;typCpt&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">typcpt</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;xml&quot;</span><span class="p">][</span><span class="s2">&quot;typCpt&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - typCpt not found in data&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        

    <span class="k">def</span><span class="w"> </span><span class="nf">__type_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GenericType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Type Sensor or other</span>

<span class="sd">        Args:</span>
<span class="sd">            data (list) : Data</span>
<span class="sd">            id (int)    : id (default 0)</span>

<span class="sd">        Raises:</span>

<span class="sd">        Returns:</span>
<span class="sd">            GenericType: Generic Type for id</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">dotpos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="nb">id</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nb">id</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">typans</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">name</span>    <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">dotpos</span>  <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="nb">type</span>    <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">18</span><span class="p">):</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;°C&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;%&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;V&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;mV&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;W&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;kW&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;mb&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;l&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;m3&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;s&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;mn&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;hr&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;day&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;Wh&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;kWh&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;°F&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;°K&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">21</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;mS&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">22</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;Htz&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">23</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;J&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;hPa&quot;</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="mi">25</span><span class="p">:</span>
            <span class="n">suffix</span>  <span class="o">=</span> <span class="s2">&quot;lux&quot;</span>

        <span class="n">_LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - type info - Name: </span><span class="si">%s</span><span class="s2">, Suffix: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
        <span class="n">field</span><span class="p">:</span> <span class="n">GenericType</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;dotpos&quot;</span><span class="p">:</span> <span class="n">dotpos</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">,</span>
            <span class="s2">&quot;suffix&quot;</span><span class="p">:</span> <span class="n">suffix</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">field</span>

<div class="viewcode-block" id="MSunPVDataIndex.sensor_type_info">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVDataIndex.sensor_type_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sensor_type_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SensorType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sensor information type</span>

<span class="sd">        Args:</span>
<span class="sd">            id (int)    : id (default 0)</span>

<span class="sd">        Raises:</span>

<span class="sd">        Returns:</span>
<span class="sd">            SensorType: Sensor information</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__type_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">typans</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="MSunPVDataIndex.counter_type_info">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVDataIndex.counter_type_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">counter_type_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span> <span class="n">CounterType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Counter information type</span>

<span class="sd">        Args:</span>
<span class="sd">            id (int)    : id (default 0)</span>

<span class="sd">        Raises:</span>

<span class="sd">        Returns:</span>
<span class="sd">            CounterType: Counter information</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__type_info</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">typcpt</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span></div>

        

<div class="viewcode-block" id="MSunPVDataIndex.output_type_txt">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVDataIndex.output_type_txt">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">output_type_txt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Output text</span>

<span class="sd">        Args:</span>
<span class="sd">            id (int)    : id (default 0)</span>

<span class="sd">        Raises:</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: text</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">typouts</span><span class="p">[</span><span class="nb">id</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nb">id</span><span class="p">:</span>
            <span class="n">txt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">typouts</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">txt</span></div>

    
<div class="viewcode-block" id="MSunPVDataIndex.command_info">
<a class="viewcode-back" href="../../msunpv.html#msunpv.MSunPVDataIndex.command_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">command_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Command</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Command information</span>

<span class="sd">        Args:</span>
<span class="sd">            id (int)    : id (default 0)</span>

<span class="sd">        Raises:</span>

<span class="sd">        Returns:</span>
<span class="sd">            Command</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmdtype</span>     <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cmdvalue</span>    <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cmdtxt</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">param1</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">param2</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">param3</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">param4</span>      <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmdm</span><span class="p">[</span><span class="nb">id</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nb">id</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cmdm</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)</span>
            <span class="n">cmdtype</span>     <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cmdvalue</span>    <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">cmdtxt</span>      <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">param1</span>      <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">param2</span>      <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">param3</span>      <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">param4</span>      <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        
        <span class="n">field</span><span class="p">:</span> <span class="n">Command</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;cmdtype&quot;</span><span class="p">:</span> <span class="n">cmdtype</span><span class="p">,</span>
            <span class="s2">&quot;cmdvalue&quot;</span><span class="p">:</span> <span class="n">cmdvalue</span><span class="p">,</span>
            <span class="s2">&quot;cmdtxt&quot;</span><span class="p">:</span> <span class="n">cmdtxt</span><span class="p">,</span>
            <span class="s2">&quot;param1&quot;</span><span class="p">:</span> <span class="n">param1</span><span class="p">,</span>
            <span class="s2">&quot;param2&quot;</span><span class="p">:</span> <span class="n">param2</span><span class="p">,</span>
            <span class="s2">&quot;param3&quot;</span><span class="p">:</span> <span class="n">param3</span><span class="p">,</span>
            <span class="s2">&quot;param4&quot;</span><span class="p">:</span> <span class="n">param4</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">field</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Franck VANHOUCKE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>